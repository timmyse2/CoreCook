<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>CH9 JSON </title>
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.css" />
    <!--<link rel="stylesheet" href="/css/site.css" />-->
    <style>
        body{
            margin:4px;
        }
    
    </style>
</head>
<body>
    <h2>JSON Study with Java Script</h2>
    <hr/>
    <table border="1">
        <tr>
            <td><p id="p1" class="alert-info">p1</p></td>
            <td><p id="p2" class="alert-info">p2</p></td>
        </tr>
        <tr>
            <td><p id="p3" class="alert-info">p3</p></td>
            <td><p id="p4" class="alert-info">p4</p></td>
        </tr>
        <tr>
            <td><p id="p5" class="alert-info">p5</p></td>
            <td><p id="p6" class="alert-info">p6</p></td>
        </tr>
        <tr>
            <td><p id="p7"class="alert-info">p7</p></td>
            <td><p id="p8"class="alert-info">p8</p></td>
        </tr>
        <tr>
            <td><p id="p9" class="alert-info">p9</p></td>
            <td><p id="p10" class="alert-info">p10</p></td>
            
        </tr>
        <tr>
            <td><textarea id="ta1" class="form-control"></textarea></td>
            <td><textarea id="ta2" class="form-control"></textarea></td>
        </tr>        
    </table>

    <!--<center>
        <div>
            <img src="images/gnp1.webp" height="300" />
        </div>
    </center>-->

</body>
</html>

<script>
    
    //var p1 = document.getElementById("p1");
    //var p2 = document.getElementById("p2");
    //var p3 = document.getElementById("p3");
    //var p4 = document.getElementById("p4");
    //var p5 = document.getElementById("p5");
    //var ta1 = document.getElementById("ta1");
    //return;
    
    var jsonData = '{"firstname":"Tom", "age":30, "city":"Taipei"}';
    var jsObj = JSON.parse(jsonData);
    p1.innerHTML = '' + jsonData;

    p2.innerHTML = ' ' + jsObj.firstname + ' ' + jsObj.age + ' '+ jsObj.city;


    var obj_Employee = {
        employee:
        {
            name: "amy", height: 160, bloodtype: "B"
        }
    };

    
    p3.innerHTML = JSON.stringify(obj_Employee);


    var str_ironMan = '{"name":"iron man"}';

    var obj_ironMan = JSON.parse(str_ironMan);
    p4.innerHTML = obj_ironMan.name + "";
    

    //~~~
    //p9-12
    var jsonArray_num = '[9,5,2,7]';
    var jsonArray_str = '["lee","jim","elsa"]';

    var objArray_num = JSON.parse(jsonArray_num);

    p5.innerHTML = objArray_num.join(" , ");

    var txt = "...";
    objArray_num.forEach(
        function (value, index) {
            //txt += `index${index}=value, `;  //<= typo in book
            //txt += ` index${index}=${value}, `;
            txt += ` #${index}:${value}, `;
        }
    );
    p6.innerHTML = txt;

    var num = "";
    for (i = 0; i < objArray_num.length; i++) {
        //num += ` ${objArray_num[i]} `; 
        num += ` ${i}: ${objArray_num[i]}, `; 
    }
    p7.innerHTML = num;

    var jsonArray_String = '["M","J","T"]';
    var jsArrayString = JSON.parse(jsonArray_String);
    p8.innerHTML = jsArrayString.join(" /");

    //~~~
    var jsonArray_obj_hero = `[
        {"name":"美國隊長", "city":"紐澤西"},
        {"name":"蜘蛛人", "city":"紐約"},
        {"name":"驚奇隊長", "city":"???"}
        ]`;
    
    var js_array_obj_hero
        = JSON.parse(jsonArray_obj_hero);
    var res = ""
    for (i = 0; i < js_array_obj_hero.length; i++) {
        
        //num += ` ${i}: ${objArray_num[i]}, `;
        res += ` ${i}_${js_array_obj_hero[i].name}
            來自
            ${js_array_obj_hero[i].city} <br> `;
    }
    p9.innerHTML = res;


    var mixed_json = `["立葵", 165, 
        {"三圍":[80,70,85]},
        {"phone":"0952-717-258"}
        ]`;

    p10.innerHTML = mixed_json;

    var mixed_obj = JSON.parse(mixed_json);    

    var stemp = ""

    stemp = mixed_obj[0] + ' '
        + mixed_obj[1] + ' '
        + mixed_obj[2] + ' '
        + mixed_obj[3];
    ta1.value = stemp;


    stemp = mixed_obj[0] + ' '
        + mixed_obj[1] + ' '
        + mixed_obj[2]["三圍"][1] + ' '
        + mixed_obj[3]["phone"];
    ta2.value = stemp;

</script>